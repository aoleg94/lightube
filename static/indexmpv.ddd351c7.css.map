{"mappings":"AA+DC,oBAAO,SACI,CACV,wBAIU,eACO,CCjElB,wBAAW,4BACsB,CCKjC,qBAAQ,eACS,CAEhB,WAA8B,CAA9B,4BAA8B,CAC9B,eAAgB,CAEhB,UAAW,CACX,aAAW,CAFX,QAEc,CACd,wBAEU,4BACsB,CAChC,UAAc,CCChB,oBAkBE,qBAAkB,CARlB,sBAA6B,CAC7B,iBAAkB,CAMlB,UAAc,CAjBV,oBAEiB,CAKrB,YAAa,CAOb,WAAgB,CAXhB,iBAAkB,CAClB,oBAcyB,CAC1B,2BAIC,qBAAqB,CAFV,yBAEW,CACvB,0BAKC,qBAAkB,CADlB,yBAA0B,CAFhB,UAGa,CACxB,sBACO,YACa,CChCpB,gDAAW,eACO,CACjB,mBACK,UACM","sources":["src/components/App.svelte","src/components/TabList.svelte","src/components/Tab.svelte","src/components/ApiButton.svelte","src/components/PlayList.svelte"],"sourcesContent":["<script>\n\timport { Tabs, TabList, TabPanel, Tab } from './tabs.js';\n\timport { need_update } from './stores.js';\n\timport { updateMetadata } from './mediasession.js';\n\timport ApiButton from './ApiButton.svelte';\n\timport TrackList from './TrackList.svelte';\n\timport PlayList from './PlayList.svelte';\n\timport Downloads from './Downloads.svelte';\n\tlet state = {title: 'KEK', video: 'kek', position: 42, duration: 212, volume: 73, playing: false, mute: false,\n\t\tplaylist: [], audio_tracks: [], sub_tracks: []};\n\tlet newurl = \"https://www.youtube.com/watch?v=LXb3EKWsInQ\";\n\tlet n = 0;\n\tlet need_update_var = true;\n\tneed_update.subscribe(v => {\n\t\tif(!v) return;\n\t\tfetch('/api/status2').then(resp => resp.json()).then(js => {\n\t\t\tstate = js;\n\t\t\tneed_update.set(false);\n\t\t\tupdateMetadata(state);\n\t\t});\n\t});\n\tsetInterval(() => {\n\t\tfetch('/api/status').then(resp => resp.json()).then(js => {\n\t\t\tif(js.playlist_pos != state.playlist_pos)\n\t\t\t\tneed_update.set(true);\n\t\t\tfor(var key in js)\n\t\t\t\tstate[key] = js[key];\n\t\t\tupdateMetadata(state);\n\t\t});\n\t\tn = n > 10 ? 0 : n + 1;\n\t\tif(n === 0)\n\t\t\tneed_update.set(true);\n\t}, 250);\n\tneed_update.set(true);\n\n\tfunction seek(e) {\n\t\tvar v = e.target.value;\n\t\tfetch('/api/seek/abs/' + v, {method: 'POST'});\n\t};\n\tfunction vol(e) {\n\t\tvar v = e.target.value;\n\t\tfetch('/api/vol/abs/' + v, {method: 'POST'});\n\t};\n\tfunction hms(s) {\n\t\tif(s === null || s === undefined)\n\t\t\treturn '--:--';\n\t\tvar h = Math.floor(s / 3600);\n\t\ts = s % 3600;\n\t\tvar m = Math.floor(s / 60);\n\t\ts = Math.floor(s % 60);\n\t\treturn h.toString() + ':' +\n\t\t\tm.toString().padStart(2, '0') + ':' +\n\t\t\ts.toString().padStart(2, '0');\n\t};\n\n\tconst MAX_QUALITY = 999999999;\n\tconst QUALITY_VARIANTS = [MAX_QUALITY, 2160, 1080, 720, 480, 360, 240, 144];\n</script>\n\n<style>\n\th1 {\n\t\ttext-align: center;\n\t}\n\t.w100 {\n\t\twidth: 98%;\n\t}\n\t.w40 {\n\t\twidth: 40%;\n\t}\n\t.selected {\n\t\tfont-weight: bold;\n\t}\n</style>\n\n<span>{state.title || \"No video\"}</span>\n<br/>\n<a href={state.video}>{state.video || \"\"}</a>\n<br/>\nNew URL:<input class=w100 type=text bind:value={newurl} maxlen/>\n<br/>\n<ApiButton text=\"Play Now\" uri={\"/api/load/\"+encodeURIComponent(newurl)}/>\n<ApiButton text=Prepend uri={\"/api/add/\"+encodeURIComponent(newurl)}/>\n<ApiButton text=Close uri={\"/api/reinit\"}/>\n<br/>\n<br/>\nSeek: {hms(state.position)} / {hms(state.duration)}\n<input class=w100 type=range min=0 value={state.position} max={state.duration} on:change={seek}/>\n<br/>\n<br/>\n<ApiButton text=\"‚èÆ\" uri=\"/api/seek/rel/-60\"/>\n<ApiButton text=\"‚è™\" uri=\"/api/seek/rel/-5\"/>\n{#if !state.playing}\n<ApiButton text=\"‚ñ∂Ô∏è\" uri=\"/api/play\"/>\n{:else}\n<ApiButton text=\"‚è∏\" uri=\"/api/pause\"/>\n{/if}\n<ApiButton text=\"‚è©\" uri=\"/api/seek/rel/5\"/>\n<ApiButton text=\"‚è≠\" uri=\"/api/seek/rel/60\"/>\n<br/>\n<br/>\n<br/>\nVolume: {state.volume}%\n<input class=w100 type=range min=0 value={state.volume} max=130 on:change={vol}/>\n<br/>\n<br/>\n<ApiButton text={state.mute ? \"üîà\" : \"üîá\"} uri=\"/api/mute\"/>\n<ApiButton text=\"üîâ\" uri=\"/api/vol/rel/-5\"/>\n<ApiButton text=\"üîä\" uri=\"/api/vol/rel/5\"/>\n<br/>\n<ApiButton text=\"ü§ë\" uri=\"/api/sponsorblock\"/>\n<ApiButton text=\"üî°\" uri=\"/api/subpos\"/>\n<ApiButton text=\"üéö\" uri=\"/api/cyclev/af/loudnorm=I=-30 loudnorm=I=-15 anull\"/>\n<br/>\n<!--ApiButton text=\"‚èÆ\" uri=\"/api/prev\"/-->\n<ApiButton text=\"‚è™\" uri=\"/api/speed/down\"/>\n<ApiButton text=\"üïõ\" uri=\"/api/speed/abs/1\"/>\n<ApiButton text=\"‚è©\" uri=\"/api/speed/up\"/>\n<!--ApiButton text=\"‚è≠\" uri=\"/api/next\"/-->\n<br/>\n<br/>\n<Tabs>\n\t<TabList>\n\t\t<Tab>Playlist</Tab>\n\t\t<Tab>Audio Tracks</Tab>\n\t\t<Tab>Subtitles</Tab>\n\t\t<Tab>File system</Tab>\n\t\t<Tab>Quality</Tab>\n\t</TabList>\n\n\t<TabPanel>\n\t\t<PlayList playlist={state.playlist} />\n\t</TabPanel>\n\n\t<TabPanel>\n\t\t<TrackList tracks={state.audio_tracks} kind='audio'/>\n\t</TabPanel>\n\n\t<TabPanel>\n\t\t<TrackList tracks={state.sub_tracks} kind='sub'/>\n\t</TabPanel>\n\n\t<TabPanel>\n\t\t<table>\n\t\t{#each state.movies as m}\n\t\t\t<tr><td><ApiButton small={true} text=\"+\" uri={\"/api/load/file://\"+encodeURIComponent(m.full)}/><span>&nbsp;{m.name}</span></td></tr>\n\t\t{/each}\n\t\t</table>\n\t\t<ApiButton text=\"Scan movies\" uri=\"/api/scan\"/>\n\t</TabPanel>\n\n\t<TabPanel>\n\t\t<ApiButton text=\"üîÑ\" uri=\"/api/retry\" small={true}/> Cache: {state.cache|0} s\n\t\t<br/>\n\t\tCurrent max quality: {state.quality == MAX_QUALITY ? \"Max\" : state.quality+\"p\"}\n\t\t<ul>\n\t\t{#each QUALITY_VARIANTS as q}\n\t\t<li><a class:selected={state.quality == q} on:click={e => fetch(\"/api/maxres/\"+q, {method: 'POST'})} >{q == MAX_QUALITY ? \"Max\" : q+\"p\"}</a></li>\n\t\t{/each}\n\t\t</ul>\n\t</TabPanel>\n\n\t<TabPanel>\n\t\t<Downloads state={state.downloads || {}} />\n\t</TabPanel>\n</Tabs>\n","<div class=\"tab-list\">\n\t<slot></slot>\n</div>\n\n<style>\n\t.tab-list {\n\t\tborder-bottom: 1px solid #3366cc;\n\t}\n</style>","<script>\n\timport { getContext } from 'svelte';\n\timport { TABS } from './Tabs.svelte';\n\n\tconst tab = {};\n\tconst { registerTab, selectTab, selectedTab } = getContext(TABS);\n\n\tregisterTab(tab);\n</script>\n\n<style>\n\tbutton {\n\t\tbackground: none;\n\t\tborder: none;\n\t\tborder-bottom: 2px solid white;\n\t\tborder-radius: 0;\n\t\tmargin: 0;\n\t\tcolor: #ccc;\n\t\tfont-size: 1em;\n\t}\n\n\t.selected {\n\t\tborder-bottom: 2px solid #3366cc;\n\t\tcolor: #3366cc;\n\t}\n</style>\n\n<button class:selected=\"{$selectedTab === tab}\" on:click=\"{() => selectTab(tab)}\">\n\t<slot></slot>\n</button>\n","<script>\n\texport let uri;\n\texport let text;\n\texport let small = false;\n\texport let pause = false;\n\n\timport { need_update } from './stores.js';\n\timport { setupNotification } from './mediasession.js';\n\n\tfunction act() {\n\t\tfetch(uri, {method: 'POST'});\n\t\tneed_update.set(true);\n\t\tsetupNotification(pause);\n\t}\n</script>\n\n<style>\nbutton {\n  padding: 0;\n  border: none;\n  font: inherit;\n  color: inherit;\n  background-color: transparent;\n}\n.btn {\n  /* default for <button>, but useful for <a> */\n  display: inline-block;\n  text-align: center;\n  text-decoration: none;\n\n  /* create a small space when buttons wrap on 2 lines */\n  margin: 2px 0;\n\n  /* invisible border (will be colored on hover/focus) */\n  border: solid 1px transparent;\n  border-radius: 4px;\n\n  /* size comes from text & padding (no width/height) */\n  padding: 1em 1em;\n\n  /* make sure colors have enough contrast! */\n  color: #ffffff;\n  background-color: #3366cc; /*#9555af;*/\n}\n/* old-school \"down\" effect on click + color tweak */\n.btn:active {\n  transform: translateY(1px);\n  filter: saturate(150%);\n}\n/* inverse colors on mouse-over */\n.btn:hover {\n  color: #3366cc; /*#9555af;*/\n  border-color: currentColor;\n  background-color: white;\n}\n.small {\n\tpadding: 0.6em 0.6em;\n}\n</style>\n\n<a class=btn class:small on:click={act}>{text}</a>\n","<script>\n\timport ApiButton from './ApiButton.svelte';\n\texport let playlist;\n\n\t/*import { createEventDispatcher } from 'svelte';\n\tconst dispatch = createEventDispatcher();\n\tfunction setTrack(id) {\n\t\tdispatch('settrack', {\n\t\t\tid: id\n\t\t});\n\t}*/\n\timport { need_update } from './stores.js';\n\n\tfunction setTrack(id) {\n\t\tfetch('/api/setprop/playlist_pos/' + id, {method: 'POST'});\n\t\tneed_update.set(true);\n\t}\n\n\tfunction getIcon(t) {\n\t\treturn t.current ? \"‚ñ∂\" : \"‚èØ\";\n\t}\n</script>\n\n<style>\n\t.selected {\n\t\tfont-weight: bold;\n\t}\n\t.max {\n\t\twidth: 100%;\n\t}\n</style>\n\n<table class=max>\n\t{#each playlist as t,id}\n\t\t<tr>\n\t\t\t<td class=max>\n\t\t\t\t{#if t.current}\n\t\t\t\t\t<ApiButton small={true} text=\"‚èØ\" uri=\"/api/play\"/>\n\t\t\t\t{:else}\n\t\t\t\t\t<ApiButton small={true} text=\"‚ñ∂\" uri=\"/api/setprop/playlist_pos/{id}\"/>\n\t\t\t\t{/if}\n\t\t\t\t<a href=\"{t.filename}\" class:selected={t.current} >{t.title || t.filename}</a>\n\t\t\t</td>\n\t\t\t<td><ApiButton small={true} text=\"‚è´\" uri=\"/api/move/{id}/{id-1}\"/></td>\n\t\t\t<td><ApiButton small={true} text=\"‚è¨\" uri=\"/api/move/{id}/{id+2}\"/></td>\n\t\t\t<td><ApiButton small={true} text=\"‚ùå\" uri=\"/api/remove/{id}\"/></td>\n\t\t</tr>\n\t{/each}\n</table>\n{#if playlist.length > 0}\n<ApiButton text=\"Clear\" uri=\"/api/clear\"/>\n{/if}\n<!-- ‚è´ up ‚è¨ down -->\n"],"names":[],"version":3,"file":"indexmpv.ddd351c7.css.map"}